<template>
  <div id="app">
    <!-- 顶部导航栏 -->
    <el-header height="30px" class="header">
      <el-menu mode="horizontal" background-color="#34495e" text-color="#fff" active-text-color="#ffd04b"
               style="height: 30px;">
        <el-sub-menu index="1">
          <template #title>文件</template>
          <el-menu-item index="1-1">
            <template #title>
              <el-icon><Upload /></el-icon>
              导入模型
            </template>
          </el-menu-item>
          <el-menu-item index="1-2">
            <template #title>
              <el-icon><FolderAdd /></el-icon>
              导入Lora
            </template>
          </el-menu-item>
        </el-sub-menu>

        <el-sub-menu index="2">
          <template #title>编辑</template>
          <el-menu-item index="2-1"  @click="handleSetPath">
            <template #title>
              <el-icon><Setting /></el-icon>
              设置
            </template>
          </el-menu-item>
          <el-menu-item index="2-2" @click="handleCut">
            <template #title>
              <el-icon><Scissor /></el-icon>
              剪切
            </template>
          </el-menu-item>
          <el-menu-item index="2-3" @click="handleCopy">
            <template #title>
              <el-icon><CopyDocument /></el-icon>
              拷贝
            </template>
          </el-menu-item>
          <el-menu-item index="2-4" @click="handlePaste">
            <template #title>
              <el-icon><DocumentCopy /></el-icon>
              粘贴
            </template>
          </el-menu-item>
          <el-menu-item index="2-5" @click="handleSelectAll">
            <template #title>
              <el-icon><Select /></el-icon>
              全选
            </template>
          </el-menu-item>
        </el-sub-menu>
        <el-menu-item index="3">视图</el-menu-item>
        <el-menu-item index="4">窗口</el-menu-item>
        <el-menu-item index="5">帮助</el-menu-item>
      </el-menu>
    </el-header>

    <!-- 左侧导航栏和中间内容区域 -->
    <el-container style="background-color: #333333;">
      <!-- 左侧导航栏 -->
      <el-aside width="110px" class="left-toolbar">
        <div class="logo">
<!--          <img src="@/assets/logo.png" alt="Logo"/>-->
          <svg t="1743350378606" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17479" width="60" height="60">
            <path d="M620.571429 0l0 877.714286-155.428571 73.142857q-130.285714-11.428571-236.571429-58.285714t-167.428571-119.142857-61.142857-155.714286q0-80 57.428571-150.571429t157.142857-117.428571 223.714286-61.714286l0 98.285714q-124 21.714286-203.714286 85.714286t-79.714286 145.714286q0 86.857143 88.285714 152.571429t222 82.857143l0-777.142857zm382.285714 332.571429l21.142857 222.857143-300-65.142857 84-47.428571q-68-40-160-56.571429l0-98.285714q158.285714 18.857143 274.857143 89.714286z"
                  p-id="17480" fill="#C4BFBFFF"></path></svg>
        </div>
        <el-menu
            v-if="route"
            :default-active="route.path || '/text-to-image'"
            mode="vertical"
            router
            class="side-menu"
            background-color="#2c3e50"
            text-color="#fff"
            active-text-color="#ffd04b"
        >
          <el-menu-item index="/text-to-image">
            <template #title>
              <svg t="1743347166804" class="icon" viewBox="0 0 1024 1024" version="1.1"
                   xmlns="http://www.w3.org/2000/svg" p-id="7206" width="50" height="50">
                <path
                    d="M354.05824 250.34752a112.39424 112.39424 0 0 0-114.2784 110.592v34.07872a26.37824 26.37824 0 0 1-52.71552 0v-34.07872a164.2496 164.2496 0 0 1 166.99392-161.5872h105.34912a25.55904 25.55904 0 1 1 0 50.9952H354.05824z m77.4144 600.55552h-44.2368a31.17056 31.17056 0 0 0 2.29376-11.6736 243.95776 243.95776 0 0 0-245.92384-240.10752v-27.2384a110.592 110.592 0 0 1 112.4352-108.9536h175.59552a110.592 110.592 0 0 1 112.39424 108.9536v170.10688a110.592 110.592 0 0 1-112.39424 108.87168l-0.16384 0.04096z m28.0576-251.74016a34.07872 34.07872 0 1 0-35.14368-34.03776c0.28672 19.0464 15.9744 34.28352 35.0208 33.9968h0.12288zM322.92864 838.8608c0 4.096 0.77824 8.192 2.2528 12.04224H255.75424A112.39424 112.39424 0 0 1 143.36 738.54976v-81.1008a181.57568 181.57568 0 0 1 179.6096 181.53472v-0.12288zM726.6304 125.952a25.8048 25.8048 0 0 1 26.25536 25.6v49.80736h101.376c7.33184 0 14.336 2.94912 19.37408 8.192a25.1904 25.1904 0 0 1 6.9632 19.41504 294.912 294.912 0 0 1-98.9184 192.3072c21.7088 16.30208 47.59552 26.17344 74.67008 28.54912a25.8048 25.8048 0 0 1 24.1664 27.52512 26.13248 26.13248 0 0 1-28.30336 23.51104 200.66304 200.66304 0 0 1-113.0496-47.18592 300.2368 300.2368 0 0 1-138.24 47.104 26.13248 26.13248 0 0 1-28.34432-23.47008 25.8048 25.8048 0 0 1 24.1664-27.56608 245.30944 245.30944 0 0 0 106.61888-34.6112 186.28608 186.28608 0 0 1-35.0208-93.02016 25.31328 25.31328 0 0 1 11.0592-23.9616 26.99264 26.99264 0 0 1 26.91072-2.048c8.64256 4.01408 14.336 12.53376 14.7456 22.1184 2.21184 23.7568 10.6496 46.57152 24.49408 66.02752A250.96192 250.96192 0 0 0 824.1152 252.7232h-224.8704a25.8048 25.8048 0 1 1 0-51.24096h101.29408V151.38816a26.0096 26.0096 0 0 1 26.09152-25.43616z m119.11168 447.03744a26.0096 26.0096 0 0 1 26.33728 25.6v102.44096a164.61824 164.61824 0 0 1-166.83008 162.2016h-35.10272a25.8048 25.8048 0 1 1 0-51.2h35.10272a112.59904 112.59904 0 0 0 114.2784-111.0016v-102.4a26.0096 26.0096 0 0 1 26.2144-25.64096z"
                    p-id="7207" fill="#C4BFBFFF"></path>
              </svg>
            </template>
          </el-menu-item>
          <el-menu-item index="/image-to-image">
            <template #title>
              <svg t="1743347077780" class="icon" viewBox="0 0 1024 1024" version="1.1"
                   xmlns="http://www.w3.org/2000/svg" p-id="6227" width="50" height="50">
                <path
                    d="M645.12 0a40.96 40.96 0 0 1 40.96 40.96v394.24h261.12a40.96 40.96 0 0 1 40.96 40.96v506.88a40.96 40.96 0 0 1-40.96 40.96H378.88a40.96 40.96 0 0 1-40.96-40.96v-394.24H76.8a40.96 40.96 0 0 1-40.96-40.96V40.96a40.96 40.96 0 0 1 40.96-40.96h568.32z m261.12 496.64h-220.16v51.2a40.96 40.96 0 0 1-40.96 40.96h-7.43936c1.31584 1.15712 2.59584 2.3552 3.84 3.59936 7.32672 7.32672 13.17376 15.96416 17.536 25.9072A77.9776 77.9776 0 0 1 665.6 649.984a77.9776 77.9776 0 0 1-6.54336 31.6672 87.22432 87.22432 0 0 1-17.536 26.17344c-7.32672 7.5008-15.96416 13.43488-25.9072 17.79712A77.9776 77.9776 0 0 1 583.936 732.16c-11.52 0-22.2464-2.18112-32.18944-6.54336-9.94816-4.36224-18.5856-10.2912-25.91232-17.79712a87.22432 87.22432 0 0 1-17.536-26.17344A77.9776 77.9776 0 0 1 501.76 649.984c0-11.16672 2.18112-21.72416 6.54336-31.6672 4.36224-9.94816 10.20928-18.5856 17.536-25.91232 1.24416-1.24416 2.52416-2.44224 3.84-3.59936l-124.2624 0.01024c2.08384 171.3664 5.31456 254.44864 9.69216 249.26208a229.62176 229.62176 0 0 1 23.99744-24.59648c8.3456-7.3216 16.95744-13.34272 25.82528-18.05312 8.86784-4.7104 28.06784-7.0656 37.10976-7.0656 10.78272 0 9.84576 0.78848 17.66912 2.3552 7.82848 1.57184 14.78656 3.57888 20.86912 6.02112a139.07968 139.07968 0 0 1 16.95744 8.11008 139.07968 139.07968 0 0 0 16.95744 8.11008c6.08768 2.44224 23.1936 4.44928 30.848 6.016 7.64928 1.57184 16.86528 2.3552 27.648 2.3552 10.78272 0 15.31904-30.0544 49.5616-34.01216 34.24768-3.95264 49.27488 28.89728 57.62048 19.12832 8.3456-9.76384 18.26304-48.59392 29.74208-55.05024 11.47392-6.4512 25.39008-9.6768 41.73312-9.6768 13.91616 0 27.30496 4.27008 40.17664 12.81536 12.86656 8.5504 24.7808 19.62496 35.7376 33.2288 10.9568 13.60384 21.0432 28.7744 30.2592 45.52192 4.5312 8.23808 5.07392-0.95232 5.28384-10.50624l0.04096-1.90976c0.17408-9.216 0.26624-17.70496 3.57376-10.07616V517.12a20.48 20.48 0 0 0-20.48-20.48z m-302.08-435.2H122.88a20.48 20.48 0 0 0-20.48 20.48v384a355.13344 355.13344 0 0 1 20.86912-27.20768 229.62176 229.62176 0 0 1 23.99744-24.59648c8.3456-7.3216 16.95744-13.34272 25.82528-18.05312 8.86784-4.7104 17.82784-7.0656 26.86976-7.0656 10.78272 0 20.08576 0.78848 27.90912 2.3552 7.82848 1.57184 14.78656 3.57888 20.86912 6.02112a139.07968 139.07968 0 0 1 16.95744 8.11008 139.07968 139.07968 0 0 0 16.95744 8.11008c6.08768 2.44224 12.9536 4.44928 20.608 6.016 7.64928 1.57184 16.86528 2.3552 27.648 2.3552 10.78272 0 20.08576-3.2256 27.91424-9.6768 7.82336-6.4512 15.04256-14.5664 21.65248-24.33536a616.6528 616.6528 0 0 0 19.82464-31.39584 223.36 223.36 0 0 1 22.43072-31.39584 109.07648 109.07648 0 0 1 29.74208-24.33024c11.47392-6.4512 25.39008-9.6768 41.73312-9.6768 13.91616 0 27.30496 4.27008 40.17664 12.81536 12.86656 8.5504 24.7808 19.62496 35.7376 33.2288 10.9568 13.60384 21.0432 28.7744 30.2592 45.52192 9.216 16.7424 17.3056 33.14176 24.25856 49.18784V81.92a20.48 20.48 0 0 0-20.48-20.48zM281.86112 133.12c11.16672 0 21.72416 2.18112 31.6672 6.54336 9.94816 4.36224 18.5856 10.20928 25.91232 17.536 7.32672 7.32672 13.17376 15.96416 17.536 25.9072A77.9776 77.9776 0 0 1 363.52 214.784a77.9776 77.9776 0 0 1-6.54336 31.6672 87.22432 87.22432 0 0 1-17.536 26.17344c-7.32672 7.5008-15.96416 13.43488-25.9072 17.79712A77.9776 77.9776 0 0 1 281.856 296.96c-11.52 0-22.2464-2.18112-32.18944-6.54336-9.94816-4.36224-18.5856-10.2912-25.91232-17.79712a87.22432 87.22432 0 0 1-17.536-26.17344A77.9776 77.9776 0 0 1 199.68 214.784c0-11.16672 2.18112-21.72416 6.54336-31.6672 4.36224-9.94816 10.20928-18.5856 17.536-25.91232 7.32672-7.32672 15.96416-13.17376 25.9072-17.536C259.61984 135.30112 270.35136 133.12 281.86624 133.12z"
                    p-id="6228" fill="#C4BFBFFF"></path>
              </svg>
            </template>
          </el-menu-item>
          <el-menu-item index="/gallery">
            <template #title>
              <svg t="1743347248524" class="icon" viewBox="0 0 1024 1024" version="1.1"
                   xmlns="http://www.w3.org/2000/svg" p-id="9077" width="50" height="50">
                <path
                    d="M1004.488 930.504c-13.04 13.04-28.664 19.576-46.936 19.576L292.912 950.08c-18.272 0-33.904-6.536-46.936-19.576-13-13.08-19.52-28.752-19.52-47.088L226.456 376.864c0-18.328 6.52-33.992 19.52-47.056 13.024-13.04 28.664-19.576 46.936-19.576l664.632 0c18.272 0 33.896 6.536 46.936 19.576 13 13.072 19.512 28.728 19.512 47.056l0 506.544C1024 901.752 1017.488 917.424 1004.488 930.504zM970.832 376.888c0-3.624-1.328-6.744-3.968-9.368-2.624-2.648-5.744-3.952-9.352-3.952L292.912 363.568c-3.608 0-6.728 1.304-9.344 3.952-2.624 2.64-3.944 5.744-3.944 9.368l0 506.56c0 3.584 1.32 6.712 3.944 9.336 2.648 2.656 5.736 3.976 9.344 3.976l664.6 0c3.608 0 6.728-1.32 9.352-3.976 2.64-2.624 3.968-5.752 3.968-9.336L970.832 376.888zM332.816 763.456 465.712 630.16l66.456 66.664 212.672-213.296 172.816 173.28 0 186.64L332.816 843.448 332.816 763.456zM412.56 576.824c-22.168 0-40.992-7.752-56.488-23.32-15.52-15.536-23.264-34.432-23.264-56.64 0-22.232 7.736-41.104 23.264-56.656 15.496-15.544 34.32-23.328 56.488-23.328 22.144 0 40.984 7.784 56.48 23.328 15.496 15.552 23.256 34.424 23.256 56.656 0 22.208-7.76 41.104-23.256 56.64C453.544 569.072 434.704 576.824 412.56 576.824zM852.68 258.736c0-3.616-1.32-6.736-3.968-9.368-2.624-2.656-5.744-3.952-9.344-3.952L174.76 245.416c-3.608 0-6.72 1.296-9.344 3.952-2.624 2.632-3.944 5.744-3.944 9.368l0 506.552c0 3.584 1.32 6.712 3.944 9.336 2.648 2.656 5.736 3.984 9.344 3.984l12.32 0 0 23.84c0 10.424 2.072 20.36 5.752 29.464l-18.072 0c-18.272 0-33.904-6.536-46.928-19.576-13.008-13.08-19.52-28.752-19.52-47.088L108.312 258.712c0-18.328 6.512-33.992 19.52-47.056 13.024-13.032 28.664-19.576 46.928-19.576l664.632 0c18.272 0 33.896 6.536 46.936 19.576 13 13.072 19.512 28.728 19.512 47.056l0 12.056-53.168 0L852.672 258.736zM744.376 140.584c0-3.624-1.328-6.744-3.968-9.368-2.624-2.648-5.744-3.944-9.352-3.944L66.456 127.272c-3.616 0-6.728 1.296-9.344 3.952-2.624 2.64-3.944 5.744-3.944 9.368l0 506.552c0 3.592 1.32 6.72 3.944 9.344 2.648 2.648 5.736 3.976 9.344 3.976l12.32 0 0 23.84c0 10.432 2.072 20.36 5.752 29.464L66.456 713.768c-18.272 0-33.904-6.528-46.936-19.568C6.52 681.12 0 665.448 0 647.112L0 140.56c0-18.328 6.52-33.992 19.52-47.056 13.024-13.04 28.664-19.576 46.936-19.576l664.632 0c18.272 0 33.896 6.536 46.928 19.576 13 13.072 19.52 28.728 19.52 47.056l0 12.056-53.168 0L744.368 140.584z"
                    p-id="9078" fill="#C4BFBFFF"></path>
              </svg>
            </template>
          </el-menu-item>
          <el-menu-item index="/square-grid">
            <template #title>
              <svg t="1743347349513" class="icon" viewBox="0 0 1024 1024" version="1.1"
                   xmlns="http://www.w3.org/2000/svg" p-id="10929" width="50" height="50">
                <path
                    d="M199.350857 476.635429H394.788571c54.418286 0 81.846857-27.428571 81.846858-83.986286V201.069714c0-56.576-27.428571-83.565714-81.846858-83.565714H199.350857c-54.418286 0-81.846857 26.989714-81.846857 83.565714v191.579429c0 56.557714 27.428571 83.986286 81.846857 83.986286z m430.299429 0h194.998857c54.857143 0 81.846857-27.428571 81.846857-83.986286V201.069714c0-56.576-26.989714-83.565714-81.846857-83.565714H629.650286c-54.436571 0-81.865143 26.989714-81.865143 83.565714v191.579429c0 56.557714 27.428571 83.986286 81.865143 83.986286z m-429.44-60.416c-14.994286 0-22.290286-7.716571-22.290286-23.588572V201.088c0-15.433143 7.296-23.149714 22.308571-23.149714h193.28c14.994286 0 22.710857 7.716571 22.710858 23.149714v191.579429c0 15.853714-7.716571 23.570286-22.710858 23.570285z m430.281143 0c-14.994286 0-22.272-7.716571-22.272-23.588572V201.088c0-15.433143 7.277714-23.149714 22.272-23.149714h193.718857c14.573714 0 21.869714 7.716571 21.869714 23.149714v191.579429c0 15.853714-7.296 23.570286-21.869714 23.570285zM199.350857 906.496H394.788571c54.418286 0 81.846857-26.989714 81.846858-83.565714v-192c0-56.137143-27.428571-83.565714-81.846858-83.565715H199.350857c-54.418286 0-81.846857 27.428571-81.846857 83.565715v192c0 56.576 27.428571 83.565714 81.846857 83.565714z m430.299429 0h194.998857c54.857143 0 81.846857-26.989714 81.846857-83.565714v-192c0-56.137143-26.989714-83.565714-81.846857-83.565715H629.650286c-54.436571 0-81.865143 27.428571-81.865143 83.565715v192c0 56.576 27.428571 83.565714 81.865143 83.565714zM200.210286 846.08c-14.994286 0-22.290286-7.716571-22.290286-23.149714V631.350857c0-15.853714 7.296-23.570286 22.308571-23.570286h193.28c14.994286 0 22.710857 7.716571 22.710858 23.588572v191.561143c0 15.433143-7.716571 23.149714-22.710858 23.149714z m430.281143 0c-14.994286 0-22.272-7.716571-22.272-23.149714V631.350857c0-15.853714 7.277714-23.570286 22.272-23.570286h193.718857c14.573714 0 21.869714 7.716571 21.869714 23.588572v191.561143c0 15.433143-7.296 23.149714-21.869714 23.149714z"
                    p-id="10930" fill="#C4BFBFFF"></path>
              </svg>
            </template>
          </el-menu-item>
        </el-menu>
      </el-aside>

      <!-- 中间内容区域 -->
      <el-main class="main-content">
        <!-- 在这里引入其他组件 -->
        <router-view></router-view>
      </el-main>
    </el-container>
  </div>
</template>
<script setup>
import {useRoute} from 'vue-router';
import { Upload, FolderAdd,
  Setting,
  Scissor,
  CopyDocument,
  DocumentCopy,
  Select} from '@element-plus/icons-vue';
import {ref} from "vue";

const route = useRoute();
const savePath = ref('')
// 剪切功能
const handleCut = async () => {
  const selection = window.getSelection()
  if (selection.toString()) {
    await navigator.clipboard.writeText(selection.toString())
    document.execCommand('delete') // 删除选中内容
  }
}

// 复制功能
const handleCopy = async () => {
  const selection = window.getSelection()
  if (selection.toString()) {
    await navigator.clipboard.writeText(selection.toString())
  }
}

// 粘贴功能
const handlePaste = async () => {
  const text = await navigator.clipboard.readText()
  const activeElement = document.activeElement
  if (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA') {
    document.execCommand('insertText', false, text)
  }
}

// 全选功能
const handleSelectAll = () => {
  const editableElement = document.activeElement
  if (editableElement.tagName === 'INPUT' || editableElement.tagName === 'TEXTAREA') {
    editableElement.select()
  }
}

// 设置保存路径（浏览器安全限制下）
const handleSetPath = async () => {
  try {
    const handle = await window.showDirectoryPicker()
    savePath.value = handle.name
  } catch (error) {
    console.log('用户取消选择')
  }
}

// 旧版浏览器兼容方案
const fallbackCopy = text => {
  const textarea = document.createElement('textarea')
  textarea.value = text
  document.body.appendChild(textarea)
  textarea.select()
  document.execCommand('copy')
  document.body.removeChild(textarea)
}

// 安全路径设置备选方案
const fallbackSetPath = () => {
  const input = document.createElement('input')
  input.type = 'file'
  input.webkitdirectory = true
  input.onchange = e => {
    savePath.value = e.target.files[0].webkitRelativePath.split('/')[0]
  }
  input.click()
}
</script>

<style scoped>
#app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.header {
  background-color: #333333;
  color: white;
  padding: 0 20px;
  line-height: 30px;
}

.left-toolbar {
  background-color: #333333;
  color: white;
  margin-top: 20px;
}

.main-content {
  background-color: #333333;
  padding: 0;
}

.el-row {
  margin-top: 0;
}

.el-menu {
  border-bottom: none;
  border-right: none;
  background-color: #333333;
}

.logo {
  text-align: center;
  margin-bottom: 10px;
}

.logo img {
  width: 60px;
  height: auto;
}

.side-menu {
  display: flex;
  gap: 20px;
  flex-direction: column;
  flex-wrap: nowrap;
  align-items: center;
}

.side-menu .el-menu-item {
  position: relative;
  transition: all 0.3s ease;
}

.side-menu .el-menu-item.is-active {
  background-color: #282828 !important;
  box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.5);
}

.side-menu .el-menu-item:hover {
  background-color: #4a586e !important;
  box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.5);
}

.side-menu .el-menu-item.is-active:before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background-color: #ffd04b; /* 设置左边框颜色 */
}

.icon {
  font-size: 18px;
  margin-right: 10px;
}

.el-sub-menu__title {
  color: #fff !important;
}
.el-sub-menu .el-menu-item {
  min-width: 120px;
  background-color: #2c3e50 !important;
}
.el-sub-menu .el-menu-item:hover {
  background-color: #4a586e !important;
}

.el-sub-menu .el-menu-item {
  padding-left: 35px !important; /* 增加子菜单缩进 */
}
</style>
